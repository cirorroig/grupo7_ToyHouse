<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/head")%>
<body>
    <%- include("./partials/header")%>
    <main class="edit" style="background-color: transparent;">
        <h1>¡Edita tu cuenta!</h1>
        <div class="edit-form" id="formulario">
            <form action="/users/<%= locals.userLogged.id_usuario %>?_method=PUT " enctype="multipart/form-data" method="post" class="edit-form">
                <div class="edit-information">
                    <label for="first_name">Nombre</label>
                    <input type="text" name="first_name" id="first_name" placeholder="Ej: Juan"
                    class="<%= locals.errors && errors.first_name? "is-invalid": null %> <%= locals.oldData && oldData.first_name? "is-valid": null %>"  
                    value="<%= locals.oldData ? oldData.first_name: null %>">
                    <% if (locals.errors && errors.first_name) { %>                
                        <div class="text-danger">
                        <%= errors.first_name.msg %> 
                        </div>
                    <% } %>
                    <small class="first_nameError error">El nombre tiene que tener entre 2 y 20 caracteres, sin simbolos especiales</small>
                </div>
                <div class="edit-information">
                    <label for="last_name">Apellido</label>
                    <input type="text" name="last_name" id="last_name" placeholder="Ej: Martinez"
                    class="<%= locals.errors && errors.last_name? "is-invalid": null %> <%= locals.oldData && oldData.last_name? "is-valid": null %>"  
                    value="<%= locals.oldData ? oldData.last_name: null %>">
                    <% if (locals.errors && errors.last_name) { %>                
                        <div class="text-danger">
                        <%= errors.last_name.msg %> 
                        </div>
                    <% } %>
                    <small class="last_nameError error">El apellido tiene que tener entre 2 y 20 caracteres, sin simbolos especiales</small>
                </div>
                <div class="edit-information">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" name="email" id="email" placeholder="tu@mail.com"
                    class="<% if (locals.errors && errors.email) { %>
                        <%= "is-invalid" %> 
                        <% } else if (locals.oldData && oldData.email) { %>
                           <%= "is-valid" %>  
                        <% } else { %>
                         <%= null %> 
                        <% } %>"  
                    value="<%= locals.oldData ? oldData.email: null %>">
                    <% if (locals.errors && errors.email) { %>                
                        <div class="text-danger">
                        <%= errors.email.msg %> 
                        </div>
                    <% } %>
                    <small class="emailError error">Ingrese un email válido</small>
                </div>
                <div class="edit-information">
                    <label for="password">Contraseña</label>
                    <input type="password" name="password" id="password"
                    class="<%= locals.errors && errors.password? "is-invalid": null %> ">
                    <% if (locals.errors && errors.password) { %>                
                        <div class="text-danger">
                        <%= errors.password.msg %> 
                        </div>
                    <% } %>
                    <small class="passwordError error">La contraseña debe tener al menos 8 caracteres, 1 mayúscula, 1 minúscula, 1 número y un caracter especial</small>
                </div>
                <div class="edit-image">
                    <label for="image">Imagen de perfil</label>
                    <input type="file" name="image" id="image"
                    class="<%= locals.errors && errors.image? "is-invalid": null %> <%= locals.oldData && oldData.image? "is-valid": null %>"  
                    value="<%= locals.oldData ? oldData.image: null %>">
                    <% if (locals.errors && errors.image) { %>                
                        <div class="text-danger">
                        <%= errors.image.msg %> 
                        </div>
                    <% } %>
                    <small class="imageError error">La imagen debe ser de formato JPG, JPEG, PNG o GIF</small>
                </div>
                <button type="submit" class="edit-button">Editar</button>
            </form>
        </div> 
       </main>
    <%- include("./partials/footer")%> 
    <script src="/js/register.js"></script>
</body>
    
</html>