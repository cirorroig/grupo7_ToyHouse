<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/head")%>
<body>
    <%- include("./partials/header")%>
    <main class="productForm-page" >
        <section>
            <h2>Edicion de <%=products[id].name%></h2>
            <form action="/products/<%=id+1%>?_method=PUT" method="post"class="product-create" enctype="multipart/form-data">
                <div class="information">
                    <label for="name">Nombre del producto</label>
                    <input type="name" name="name" id="name"
                    class="<%= locals.errors && errors.name? "is-invalid": null %> <%= locals.oldData && oldData.name? "is-valid": null %>"  
                    value="<%= locals.oldData ? oldData.name: null %>"
                    > 
                    <% if (locals.errors && errors.name) { %>                
                        <div class="text-danger">
                        <%= errors.name.msg %> 
                        </div>
                    <% } %>
                </div>
                <div class="description">
                    <label for="description">Descripción</label>
                    <input type="text" name="description" id="description"
                    class="<%= locals.errors && errors.description? "is-invalid": null %> <%= locals.oldData && oldData.description? "is-valid": null %>"
                    value="<%= locals.oldData ? oldData.description: null %>">
                    <% if (locals.errors && errors.description) { %>                
                        <div class="text-danger">
                        <%= errors.description.msg %> 
                        </div>
                    <% } %>
                </div>
                <div class="image">
                    <input type="file" name="image" id="image">
                </div>
                <div class="especifications">
                    <label for="age">Rango de edad</label>
                    <select name="age" id="age" class="<%= locals.errors && errors.age? "is-invalid2": null %> <%= locals.oldData && oldData.age? "is-valid2": null %>" 
                        value="<%= locals.oldData ? oldData.age: null %>">
                        <option value="">Seleccionar</option>
                        <% for( const age of ages ) { %>
                            <option value="<%= age %>"<%= locals.oldData && (age == oldData.age)? "selected" :null%>>
                                <%= age %>
                            </option>
                        <% } %>
                    </select>
                    <% if (locals.errors && errors.age) { %>                
                        <div class="text-danger">
                        <%= errors.age.msg %> 
                        </div>
                    <% } %>
                    <div class="category">
                        <label for="category">Categoría</label>
                        <select name="category" class="<%= locals.errors && errors.category? "is-invalid2": null %> <%= locals.oldData && oldData.category? "is-valid2": null %>" >
                            <option value="">Seleccionar</option>
                            <% for( const category of categories ) { %>
                                <option value="<%= category %>"<%= locals.oldData && (category == oldData.category)? "selected" :null%>>
                                    <%= category %>
                                 </option>
                            <% } %>
                        </select>
                    </div>
                    <% if (locals.errors && errors.category) { %>                
                        <div class="text-danger">
                        <%= errors.category.msg %> 
                        </div>
                    <% } %>
                    <div class="size">
                        <label for="size">Talle</label>
                        <select name="size">
                            <option value="">Seleccionar</option>
                            <% for( const size of sizes ) { %>
                                <option value="<%= size %>"<%= locals.oldData && (size == oldData.size)? "selected" :null%>>
                                    <%= size %>
                                 </option>
                            <% } %>
                        </select>
                    </div>
                    <% if (locals.errors && errors.size) { %>                
                        <div class="text-danger">
                        <%= errors.size.msg %> 
                        </div>
                    <% } %>
                    <div class="detailedDescription">
                        <label for="detailedDescription">Descripcion detallada</label>
                        <textarea name="detailedDescription" id="detailedDescription" cols="37" rows="6" placeholder="Color, tamaño, etc."
                        class="<%= locals.errors && errors.name? "is-invalid": null %> <%= locals.oldData && oldData.detailedDescription? "is-valid2": null %>"
                        ><%= locals.oldData ? oldData.detailedDescription: null %></textarea>
                    </div>
                    <% if (locals.errors && errors.detailedDescription) { %>                
                        <div class="text-danger">
                        <%= errors.detailedDescription.msg %> 
                        </div>
                    <% } %>
                    <div class="price">
                        <label for="price">Precio</label>
                        <input type="number" name="price" id="price"
                        class="<%= locals.errors && errors.price? "is-invalid": null %> <%= locals.oldData && oldData.price? "is-valid": null %> "
                        value="<%= locals.oldData ?oldData.price:null %>">
                    </div>
                    <% if (locals.errors && errors.price) { %>                
                        <div class="text-danger">
                        <%= errors.price.msg %> 
                        </div>
                    <% } %>
                </div>
                    <div class="send-reset">
                        <button type="submit" class="buy-now-button">Editar Producto</button>
                        <button type="reset" class="buy-now-button">Reestablecer</button>
                    </div>
                </div>
            </form>
        </section>
        <section>
            <h2>Eliminacion de Producto</h2>
            <form action="/products/<%=id+1%>?_method=DELETE" method="post" class="product-create">
                <div class="send-reset">
                    <button class="buy-now-button" type="submit">Borrar Producto</button>                
                </div>
            </form>
        </section>
    </main>
</body>
</html>